<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta property="og:type" content="website">
<meta property="og:title" content="melody5417">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="melody5417">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="melody5417">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"always","offset":15,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title> melody5417 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">melody5417</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">做让自己佩服的人～</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/25/New-To-iOS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="melody5417">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="melody5417">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/25/New-To-iOS/" itemprop="url">
                  New To iOS
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-25T21:06:37+08:00">
                2017-05-25
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/05/25/New-To-iOS/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/05/25/New-To-iOS/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>从萌生想法，到鼓起勇气面试，蹉跎半年终于成行。<br>走出舒适区，拥抱变化，为新的挑战做准备， 愿一切都好～</p>
<h2 id="Introduce"><a href="#Introduce" class="headerlink" title="Introduce?"></a>Introduce?</h2><p>今天终于确定了可以转作iOS，没有预想的那么开心，有些压力。自己去年的考核还是棒棒哒，不知道转BG后，上半年的考核会变成啥样，感觉会成背锅侠，呜呜，人家不想当背锅侠(:/cry)</p>
<p>但是不看money（不看money，看啥(:/抠鼻)），看未来的发展，觉得自己是对的，是明智的，坚信不能在该拼搏学习的年纪安逸度日！</p>
<p>今天狠下心注册了苹果的开发者账号，惊奇的发现苹果变善良了，开发者账号居然苹果全平台可用了，瞬间感觉99刀花的值了～ 为了让自己更有动力，和男朋友打了个1000软妹币的赌注，2017年一定要提交一个作品！！！</p>
<p>写了个小程序 <a href="https://github.com/melody5417/PitchPerfect.git" target="_blank" rel="external">Pitch Perfect</a>，第一次用开发者账号在真机运行，记录一下遇到的问题。</p>
<h2 id="Prepare"><a href="#Prepare" class="headerlink" title="Prepare"></a>Prepare</h2><h3 id="add-device-to-Apple-ID-devices"><a href="#add-device-to-Apple-ID-devices" class="headerlink" title="add device to Apple ID devices"></a>add device to Apple ID devices</h3><p>Xcode7 之后真机调试也不用证书了，但是我还是加了下，学习下流程。<br>itunes 中查看手机的 UDID，然后登陆 Apple 的 Member Center，添加设备的 UDID。</p>
<h2 id="Create-Project"><a href="#Create-Project" class="headerlink" title="Create Project"></a>Create Project</h2><h3 id="process-symbol-files"><a href="#process-symbol-files" class="headerlink" title="process symbol files"></a>process symbol files</h3><p>创建工程后运行，弹出提示：process symbol files.<br>google 了下这个阶段，Xcode到底在做什么，以下来自 <a href="https://stackoverflow.com/questions/19187857/processing-symbol-files-in-xcode" target="_blank" rel="external">stack overFlow</a></p>
<p>It downloads the (debug) symbols from the device, so it becomes possible to debug on devices with that specific iOS version and also to symbolicate crash reports that happened on that iOS version.</p>
<p>Since symbols are CPU specific, the above only works if you have imported the symbols not only for a specific iOS device but also for a specific CPU type. The currently CPU types needed are armv7 (e.g. iPhone 4, iPhone 4s), armv7s (e.g. iPhone 5) and arm64 (e.g. iPhone 5s).</p>
<p>So if you want to symbolicate a crash report that happened on an iPhone 5 with armv7s and only have the symbols for armv7 for that specific iOS version, Xcode won’t be able to (fully) symbolicate the crash report.</p>
<p>after “Processing Symbol Files”, a folder containing symbols associated with the device (including iOS version and CPU type) was created in ~/Library/Developer/Xcode/iOS DeviceSupport/ like this: <img src="https://raw.githubusercontent.com/melody5417/blogResources/master/direcotyToSymbol.jpg" alt="dirctory to Symbol"></p>
<h3 id="couldn’t-launch"><a href="#couldn’t-launch" class="headerlink" title="couldn’t launch"></a>couldn’t launch</h3><p>连接上设备后，应用仍然无法运行，弹出提示：<img src="https://raw.githubusercontent.com/melody5417/blogResources/master/trustDeveloper.jpg" alt=""></p>
<p>此时就按提示做，解锁设备，打开 设置-&gt;通用-&gt;设备管理-&gt;开发者应用，然后信任开发者，再验证应用。</p>
<p>NOTE：这里trust操作必须联网才可完成，否则会报错。<br>关于联网验证问题，查了<a href="https://support.apple.com/en-ca/HT204460" target="_blank" rel="external">Apple的官方文档</a>:</p>
<p>You must be connected to the Internet to verify the app developer’s certificate when establishing trust.<br>If you’re behind a firewall, make sure that it’s configured to allow connections to <a href="https://ppq.apple.com" target="_blank" rel="external">https://ppq.apple.com</a>.<br>If you aren’t connected to the Internet when you trust an app, the device displays “Not Verified” instead.<br>To use the app, connect to the Internet and tap the Verify App button.</p>
<p>关于联网验证 stack overflow 还有一些其他方法绕过，具体不再细究。</p>
<h3 id="OS-Activity-Mode"><a href="#OS-Activity-Mode" class="headerlink" title="OS_Activity_Mode"></a>OS_Activity_Mode</h3><p>想要真机运行真是磨难重重，又一拦路虎：<br>if we’re in the real pre-commit handler we can’t actually add any new fences due to CA restriction.</p>
<p>这个问题就是添加环境变量 OS_Activity_Mode 并置 disable.</p>
<h2 id="RUN"><a href="#RUN" class="headerlink" title="RUN"></a>RUN</h2><p>PitchPerfect 应用是录制声音并进行音高速率的变化的小应用，需要访问麦克风。真机跑起来，点击录制，随即 crash，报错：</p>
<p>This app has crashed because it attempted to access privacy-sensitive data without a usage description.<br>The app’s Info.plist must contain an NSPhotoLibraryUsageDescription key with a string value explaining to the user how the app uses this data.</p>
<p>按照错误指引，在 Info.plist 中添加了Key: NSPhotoLibraryUsageDescription。具体如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;!-- 麦克风 --&gt; </div><div class="line">&lt;key&gt;NSMicrophoneUsageDescription&lt;/key&gt; </div><div class="line">&lt;string&gt;App需要您的同意,才能访问麦克风&lt;/string&gt;</div></pre></td></tr></table></figure>
<p>描述字符串自己随意填写就可以,但是一定要填写，不然会引发包无效的问题，导致上传打包后构建版本一直不显示。</p>
<h2 id="Final"><a href="#Final" class="headerlink" title="Final"></a>Final</h2><p>就像开篇写的一样，拥抱变化，迎接挑战，Hack On ~</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/23/程序安全开发/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="melody5417">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="melody5417">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/23/程序安全开发/" itemprop="url">
                  程序安全开发
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-23T09:48:16+08:00">
                2017-05-23
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/05/23/程序安全开发/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/05/23/程序安全开发/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>昨天听了「程序安全开发」这门课，对今后项目开发有很大的警示作用，这里先做个脑图整理，之后慢慢补充。</p>
<p><img src="https://raw.githubusercontent.com/melody5417/blogResources/master/程序安全开发.png" alt="我是脑图"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/17/OS X animations/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="melody5417">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="melody5417">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/17/OS X animations/" itemprop="url">
                  OS X animations
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-17T18:44:52+08:00">
                2017-05-17
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/05/17/OS X animations/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/05/17/OS X animations/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>新项目做一个背景渐变，同时图片缩放的动画，在设计老板的电脑上卡的厉害，所以展开了一系列对动画的研究。</p>
<p>先上脑图：<br><img src="https://raw.githubusercontent.com/melody5417/blogResources/master/OS%20X%20animations.png" alt="脑图"></p>
<p>  从图中可以看出是不推荐使用 NSAnimationContext，它是在主线程不断调用 setFrame: 和 setFrameSize: 等实现的移动和缩放动画，显然效率低下。同时我的图片又是采用离屏渲染的，所以性能更加不好。</p>
<p>  经过这几篇文章的学习，最终采用以下步骤优化：</p>
<ol>
<li>采用layer-based 的 CoreAnimation。</li>
<li>优化重绘策略：NSView 的property 设置为 NSViewLayerContentsRedrawOnSetNeedsDisplay</li>
<li>图片展示不再用 NSImageView， 直接设置为 layer 的 contents。</li>
</ol>
<p>最终实现效果老板终于满意啦，做的 <a href="https://github.com/melody5417/Animation/tree/master" target="_blank" rel="external">Demo</a>。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/16/Create-Mac-memory-pressure-observer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="melody5417">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="melody5417">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/16/Create-Mac-memory-pressure-observer/" itemprop="url">
                  Create Mac memory pressure observer
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-16T12:01:52+08:00">
                2017-05-16
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/05/16/Create-Mac-memory-pressure-observer/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/05/16/Create-Mac-memory-pressure-observer/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Mac的资料真心少，先来看看iOS是怎么做的。</p>
<h2 id="memory-pressure-observer-on-iOS"><a href="#memory-pressure-observer-on-iOS" class="headerlink" title="memory pressure observer on iOS"></a>memory pressure observer on iOS</h2><h3 id="how-to-observe"><a href="#how-to-observe" class="headerlink" title="how to observe"></a>how to observe</h3><ul>
<li>可以监听 UIApplicationDidReceiveMemoryWarningNotification 通知。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[[NSNotificationCenter defaultCenter] addObserver:self</div><div class="line">selector:@selector(XXX)</div><div class="line">name:UIApplicationDidReceiveMemoryWarningNotification </div><div class="line">object:nil];</div></pre></td></tr></table></figure>
<ul>
<li>实现 UIViewController 自身的方法didReceiveMemoryWarning，该方法在 App 接收到 memory warning 会被调用，可以在方法中释放当前不再使用的资源。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (void)didReceiveMemoryWarning;</div></pre></td></tr></table></figure>
<h3 id="how-to-mock"><a href="#how-to-mock" class="headerlink" title="how to mock"></a>how to mock</h3><ul>
<li><p>模拟器菜单<br>hardware -&gt; simulate memory warning</p>
</li>
<li><p>模拟发通知 UISimulatedMemoryWarningNotification</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CFNotificationCenterPostNotification(CFNotificationCenterGetDarwinNotifyCenter(), (CFStringRef)@&quot;UISimulatedMemoryWarningNotification&quot;, NULL, NULL, true);</div></pre></td></tr></table></figure>
<ul>
<li>私有 API</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[[UIApplication sharedApplication] performSelector:@selector(_performMemoryWarning)];</div></pre></td></tr></table></figure>
<h2 id="memory-pressure-observer-on-Mac"><a href="#memory-pressure-observer-on-Mac" class="headerlink" title="memory pressure observer on Mac"></a>memory pressure observer on Mac</h2><p>终于要切入正题，按照iOS调研的节奏开始查资料～</p>
<h3 id="how-to-observe-1"><a href="#how-to-observe-1" class="headerlink" title="how to observe"></a>how to observe</h3><p>以下来自 <a href="https://github.com/mhuusko5/M5ApplicationMemoryWarning" target="_blank" rel="external">Github</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">static dispatch_source_t source = nil;</div><div class="line">source = dispatch_source_create(DISPATCH_SOURCE_TYPE_MEMORYPRESSURE, 0,  DISPATCH_MEMORYPRESSURE_WARN | DISPATCH_MEMORYPRESSURE_CRITICAL, dispatch_get_main_queue());</div><div class="line"></div><div class="line">dispatch_source_set_event_handler(source, ^&#123;</div><div class="line">dispatch_source_memorypressure_flags_t pressureLevel = dispatch_source_get_data(source);</div><div class="line">[NSNotificationCenter.defaultCenter postNotificationName:DidReceiveMemoryWarningNotification</div><div class="line">object:nil</div><div class="line">userInfo:@&#123; @&quot;pressure&quot;: @(pressureLevel) &#125;];</div><div class="line">&#125;);</div><div class="line"></div><div class="line">dispatch_resume(source);</div></pre></td></tr></table></figure>
<p>其中 dispatch_source_create 的解释：</p>
<p>Creates a new dispatch source to monitor low-level system objects and automatically submit a handler block to a dispatch queue in response to events.</p>
<p>可以监控的 system objects 很多，包括 Timer，Signal， MemoryPressure 等。</p>
<p>其中 memoryPressure level 的定义如下： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#define DISPATCH_MEMORYPRESSURE_NORMAL		0x01</div><div class="line">#define DISPATCH_MEMORYPRESSURE_WARN		0x02</div><div class="line">#define DISPATCH_MEMORYPRESSURE_CRITICAL	0x04</div></pre></td></tr></table></figure>
<h3 id="how-to-mock-1"><a href="#how-to-mock-1" class="headerlink" title="how to mock"></a>how to mock</h3><p>目前找到的<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=463604" target="_blank" rel="external">方法</a>,<br>在 terminal 输入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo memory_pressure -S -l critical -s 15</div></pre></td></tr></table></figure>
<p>-S causes the system to simulate the specified memory pressure (warn | critical), and -s tells how many seconds to hold that simulated pressure.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/18/配置-gitignore/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="melody5417">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="melody5417">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/18/配置-gitignore/" itemprop="url">
                  配置.gitignore
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-18T20:38:47+08:00">
                2017-04-18
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/04/18/配置-gitignore/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/04/18/配置-gitignore/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="GitHub-官方"><a href="#GitHub-官方" class="headerlink" title="GitHub 官方"></a>GitHub 官方</h2><p>GitHub 官方已经准备了适用各种语言和开发环境的配置文件，<a href="https://github.com/github/gitignore" target="_blank" rel="external">链接</a>。选择下载对应的语言，再结合自定义就可以配置好用的 .ignore 啦。</p>
<h2 id="忽略文件的原则"><a href="#忽略文件的原则" class="headerlink" title="忽略文件的原则"></a>忽略文件的原则</h2><ul>
<li>忽略操作系统自动生成的文件，比如缩略图等；</li>
<li>忽略编译生成的中间文件、可执行文件等，也就是如果一个文件是通过另一个文件自动生成的，那自动生成的文件就没必要放进版本库；</li>
<li>忽略你自己的带有敏感信息的配置文件，比如存放口令的配置文件。</li>
</ul>
<h2 id="gitignore-文件规范"><a href="#gitignore-文件规范" class="headerlink" title=".gitignore 文件规范"></a>.gitignore 文件规范</h2><ol>
<li>所有空行或者以注释符号 ＃ 开头的行都会被 Git 忽略。 </li>
<li>可以使用标准的 glob 模式匹配。 </li>
<li>匹配模式最后跟反斜杠（/）说明要忽略的是目录。 </li>
<li>要忽略指定模式以外的文件或目录，可以在模式前加上惊叹号（!）取反。</li>
</ol>
<h2 id="glob-模式"><a href="#glob-模式" class="headerlink" title="glob 模式"></a>glob 模式</h2><ol>
<li>*:任意个任意字符。</li>
<li>[]:匹配任何一个在方括号中的字符。</li>
<li>?:匹配一个任意字符。</li>
<li>[0-9]:匹配字符范围内所有字符。</li>
</ol>
<h2 id="配置-gitignore"><a href="#配置-gitignore" class="headerlink" title="配置 .gitignore"></a>配置 .gitignore</h2><p>可以在对应的Git目录下，创建.gitignore文件。在忽略项中加入.DS_Store。</p>
<ul>
<li>创建 .gitignore 文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ touch .gitignore</div></pre></td></tr></table></figure>
<ul>
<li>编辑 .gitignore 文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ .DS_Store</div><div class="line">$ */.DS_Store</div></pre></td></tr></table></figure>
<p>保存即可生效，目前已完成忽略了当前目录的 .DS_Store 以及其子目录的 .DS_Store。但是怎样才能达到全局有效呢，这里就需要全局配置，让忽略文件对多有Git目录都生效，这里就需要用到git config。</p>
<h2 id="配置-Git-Config"><a href="#配置-Git-Config" class="headerlink" title="配置 Git Config"></a>配置 Git Config</h2><p>Git Config实际上是一个文件，位于用户根目录，名称是 .gitconfig。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ touch .gitignore_global</div><div class="line">// 编辑 .gitignore_global 文件，添加以下代码，引入.gitignore_global文件</div><div class="line">[core]  </div><div class="line">excludesfile = /Users/reon/.gitignore_global</div></pre></td></tr></table></figure>
<p>把从 GitHub 上下载的自定义修改后的 .gitignore 文件 copy 到该路径即可。</p>
<h2 id="添加-gitignore-后不生效怎么办"><a href="#添加-gitignore-后不生效怎么办" class="headerlink" title="添加 .gitignore 后不生效怎么办"></a>添加 .gitignore 后不生效怎么办</h2><ul>
<li>you must pay attention to the global gitignore file which sometimes may influence your gitignore.</li>
<li>When you add something into .gitignore file。First commit your current changes, or you will lose them.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git rm -r --cached .</div><div class="line">$ git add .</div><div class="line">$ git commit -m &quot;fixed untracked files&quot;</div></pre></td></tr></table></figure>
<ul>
<li>When you remove something from .gitignore file.The above steps will not work for you. First commit your current changes, or you will lose them.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">git add -f &quot;filetype&quot;</div><div class="line">git commit -m &quot;Refresh removing filetype from .gitignore file.&quot;</div><div class="line">// the &quot;filetype&quot; means the file or filetype you want to remove from the .gitignore file. </div><div class="line">// You want to make the filetype be tracked again.</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/11/block中weakSelf和strongSelf详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="melody5417">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="melody5417">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/11/block中weakSelf和strongSelf详解/" itemprop="url">
                  block中weakSelf和strongSelf详解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-11T21:12:52+08:00">
                2017-04-11
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/04/11/block中weakSelf和strongSelf详解/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/04/11/block中weakSelf和strongSelf详解/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近在看SDWebImage的源码，其中对block中循环引用问题的处理值得学习。之前的项目也遇到过循环引用的问题，遂有必要研究总结。</p>
<h2 id="当block直接或间接的被self持有时，需用weakSelf"><a href="#当block直接或间接的被self持有时，需用weakSelf" class="headerlink" title="当block直接或间接的被self持有时，需用weakSelf"></a>当block直接或间接的被self持有时，需用weakSelf</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">dispatch_block_t completionBlock = ^&#123; </div><div class="line">// self未持有block，可直接用self </div><div class="line">NSLog(@&quot;%@&quot;, self); </div><div class="line">&#125; </div><div class="line">MyViewController *myController = [[MyViewController alloc] init...]; </div><div class="line">[self presentViewController:myController animated:YES completion:completionHandler];</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">__weak typeof(self) weakSelf = self;</div><div class="line">self.completionHandler = ^&#123; </div><div class="line">// self 持有 block，直接用 self 會造成 retain cycle </div><div class="line">NSLog(@&quot;%@&quot;, weakSelf);</div><div class="line">&#125; </div><div class="line">MyViewController *myController = [[MyViewController alloc] init...]; </div><div class="line">[self presentViewController:myController animated:YES completion:self.completionHandler];</div></pre></td></tr></table></figure>
<h2 id="block中需多次访问self，需用strongSelf"><a href="#block中需多次访问self，需用strongSelf" class="headerlink" title="block中需多次访问self，需用strongSelf"></a>block中需多次访问self，需用strongSelf</h2><p>只使用 weak 的问题在于，如果在block中必须多次使用到weakSelf会有危险。因为在多次执行下，weakSelf有可能变为nil。所以需要使用strongSelf，确保 self 的有效性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">__weak typeof(self) weakSelf = self; </div><div class="line">dispatch_block_t block = ^&#123; </div><div class="line">[weakSelf doSomething]; // weakSelf != nil </div><div class="line">// preemption, weakSelf turned nil </div><div class="line">[weakSelf doSomethingElse]; // weakSelf == nil </div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">__weak typeof(self) weakSelf = self;</div><div class="line">myObj.myBlock = ^&#123; </div><div class="line">__strong typeof(weakSelf) strongSelf = weakSelf; </div><div class="line">if (strongSelf) &#123; </div><div class="line">[strongSelf doSomething]; // strongSelf != nil </div><div class="line">// preemption, strongSelf still not nil </div><div class="line">[strongSelf doSomethingElse]; // strongSelf != nil </div><div class="line">&#125; else &#123; </div><div class="line">// Probably nothing... return; </div><div class="line">&#125; </div><div class="line">&#125;;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/04/深入解析Mac-OSX-iOS操作系统-一/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="melody5417">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="melody5417">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/04/深入解析Mac-OSX-iOS操作系统-一/" itemprop="url">
                  深入解析Mac-OSX-iOS操作系统(一)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-04T15:07:30+08:00">
                2017-04-04
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/04/04/深入解析Mac-OSX-iOS操作系统-一/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/04/04/深入解析Mac-OSX-iOS操作系统-一/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="第一章-达尔文主义：OS-X的进化史"><a href="#第一章-达尔文主义：OS-X的进化史" class="headerlink" title="第一章 达尔文主义：OS X的进化史"></a>第一章 达尔文主义：OS X的进化史</h2><h3 id="iOS和OS-X对比"><a href="#iOS和OS-X对比" class="headerlink" title="iOS和OS X对比"></a>iOS和OS X对比</h3><ul>
<li>iOS内核和二进制文件编译的目标架构是基于ARM的架构，而不是x86。</li>
<li>iOS的内核源码依然闭源。</li>
<li>iOS内核的编译稍有不同，关注的是嵌入式特性和一些新的API。</li>
<li>iOS的系统GUI是SpringBoard，触屏应用加载器；而OS X中的GUI是Aqua，鼠标驱动，为窗口系统设计，Lion中以LaunchPad的形式移植了SpringBoard。</li>
<li>iOS的内存管理更为严格。</li>
<li>系统的限制更严格。</li>
</ul>
<h2 id="第二章-合众为一：OS-X和iOS的架构"><a href="#第二章-合众为一：OS-X和iOS的架构" class="headerlink" title="第二章 合众为一：OS X和iOS的架构"></a>第二章 合众为一：OS X和iOS的架构</h2><h3 id="2-1-OS-X架构概述"><a href="#2-1-OS-X架构概述" class="headerlink" title="2.1 OS X架构概述"></a>2.1 OS X架构概述</h3><ul>
<li>用户体验层</li>
<li>应用框架层</li>
<li>核心框架层</li>
<li>Darwin</li>
</ul>
<h3 id="2-2-用户体验层"><a href="#2-2-用户体验层" class="headerlink" title="2.2 用户体验层"></a>2.2 用户体验层</h3><p>提供用户界面<br>OS X用户体验层中的组件：</p>
<ul>
<li>Aqua</li>
<li>Quick Look</li>
<li>Spotlight</li>
<li>Accessibility</li>
</ul>
<p>iOS的架构在用户体验层之下基本一致，但是在用户体验层很大区别。SpringBoard完全负责所有的用户界面的任务。</p>
<h4 id="Aqua"><a href="#Aqua" class="headerlink" title="Aqua"></a>Aqua</h4><p>Aqua是OS X的GUI。主要介绍Aqua任何支持GUI的相关特性。<br>系统的第一个用户态进程launchd负责启动GUI。支持GUI工作的主进程是WindowServer，且WindowServer是Core Graphics框架的一部分，而Core Graphics位于另一个框架Application Services中。因此，WindowServer的路径是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/System/Libary/Frameworks/ApplicationServices.framework/Frameworks/CoreGraphic.framework/Resources/WindowServer</div></pre></td></tr></table></figure>
<p>WindowServer启动时传入 -daemon 开关参数。WindowServer的代码实际上不完成任何实际的工作，所有的工作都是CoreGraphics框架中的CGXServer函数完成的。</p>
<p>CGXServer会检查自己是否以后台服务程序或者以主控制台getty的方式运行。然后在后台fork出自己的子进程。当子进程准备好之后，LoginWindow进程（同样由launchd启动的）启动交互式登录过程。</p>
<h4 id="QuickLook"><a href="#QuickLook" class="headerlink" title="QuickLook"></a>QuickLook</h4><p>QuickLook允许在Finder中快速预览多种不同类型的文件，不需要双击鼠标打开文件，只需要按下空格即可。</p>
<p>QuickLook采用的是可扩展的架构，使得大部分工作是由插件完成。这些插件是后缀为 .qlgenerator 的bundle，只需要将这些bundle文件拖放到QuickLook目录（系统范围的QuickLook目录为／system／Library／QuickLook，针对个人的胃～／Libaray／QuickLook）中即可完成插件的安装。</p>
<p>插件不是独立可执行程序，没有传统的main()入口点，而是实现了QuickLookGeneratorPluginFactory入口点。另外有一个配置文件 负责将插件和对应的文件类型关联起来。文件类型通过UIT表示，即逆DNS表示法。</p>
<p>quicklookd是系统的”QuickLook服务器”，是通过以下文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/System/Library/LaunchAgents/com.apple.quicklook.plist</div></pre></td></tr></table></figure>
<p>在登录时启动的。这个后台服务程序本身在QuickLook框架中，而且不带GUI。</p>
<p>qlmanage命令的作用是维护插件，并且控制后台服务程序。</p>
<h4 id="Spotlight"><a href="#Spotlight" class="headerlink" title="Spotlight"></a>Spotlight</h4><p>spotlight背后的核心是一个索引服务器mds，mds在MetaData框架中，而这个框架是系统核心服务的一部分</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">／System／Library/CoreServices.frmework/Frameworks/Metadata.framework/Suppot/mds</div></pre></td></tr></table></figure>
<p>mds是一个没有GUI的后台服务程序。每当有任何文件操作（创建／修改／删除）发生时，内核会发送通知給mds，这个通知机制称为fsevents。</p>
<p>当mds收到通知时，mds会通过mdworker进程将各种元数据信息导入数据库。mdworker进程可以加载一个具体的Spotlight Importer从文件中提取元数据信息。</p>
<p>导入器路径（系统：/system/Library/Spotlight   用户：/Library/Spotlight），和QuickLook类似，这些importer是实现了固定API的插件。</p>
<h3 id="2-3-Darwin-UNIX核心"><a href="#2-3-Darwin-UNIX核心" class="headerlink" title="2.3 Darwin-UNIX核心"></a>2.3 Darwin-UNIX核心</h3><p>OS X中的Darwin是一个完全成熟的UNIX实现。</p>
<h4 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h4><p>Terminal默认打开的shell是/bin/bash</p>
<p>OS X和iOS中的命令行工具还可以通过telnet和SSH远程访问。OS X和iOS默认禁止，OS X打开方式如下，iOS需要jailbreak。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sudo bash</div><div class="line">/System/Library/LaunchDaemons/telnet.plist</div><div class="line">/System/Library/LaunchDaemons/ssh.plist</div><div class="line">key:Disabled -&gt;NO</div></pre></td></tr></table></figure>
<h4 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h4><p>OS X和iOS采用的都是HFS+的文件系统，HFS+总是保存大小写的区别。<br>iOS采用HFSX，默认对大小写敏感。OS X则未采用。</p>
<h3 id="UNIX的系统目录"><a href="#UNIX的系统目录" class="headerlink" title="UNIX的系统目录"></a>UNIX的系统目录</h3><p>OS X是符合UNIX标准的系统，具有标准的UNIX目录结构：</p>
<ul>
<li>/bin：UNIX中的二进制程序，常用UNIX命令所在。</li>
<li>/sbin：系统程序</li>
<li>／usr: User目录。第三方的软件安装在这里。目录中包含 bin／sbin／lib。lib用于存放共享的目标文件。</li>
<li>／etc：系统配置文件。</li>
<li>／dev：BSD设备文件。</li>
<li>／tmp：OS X上指向／private／tmp，系统上唯一所有人都有可写权限的目录。</li>
<li>／var：OS X上指向／private／var，存储杂项文件，日志，打印队列，邮件存储等。</li>
</ul>
<h4 id="OS-X特有的目录"><a href="#OS-X特有的目录" class="headerlink" title="OS X特有的目录"></a>OS X特有的目录</h4><ul>
<li>／Applications：系统中所有应用程序的默认目录</li>
<li>／Developer：所有开发者工具的默认安装位置</li>
<li>/Libary: 系统应用的数据文件／帮助和文档等数据都放在这个目录。</li>
<li>／Network：用于邻居节点发现和访问的虚拟目录。</li>
<li>／System：系统文件目录。其中只包含一个Library子目录，几乎包含了系统中的所有重要的组件。</li>
<li>／Users：所有用户的主目录所在的目录。每一个用户在这里都会创建一个自己的目录。</li>
<li>／Volumes：可移动媒体和网络文件系统的mount点所在目录</li>
<li>／Cores：如果启动了core dump，那么合格目录保存core dump文件。第四章详细讨论。</li>
</ul>
<h4 id="iOS文件系统的区别"><a href="#iOS文件系统的区别" class="headerlink" title="iOS文件系统的区别"></a>iOS文件系统的区别</h4><ul>
<li>HFSX大小写敏感，且文件系统是部分加密的。<br>// TODO 这里后续有了更多了解再补充</li>
</ul>
<h3 id="bundle"><a href="#bundle" class="headerlink" title="bundle"></a>bundle</h3><p>每一个bundle都带有相同的目录：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Contents/</div><div class="line">CodeResources/</div><div class="line">Info.plist</div><div class="line">MacOS/  包中的二进制文件内容</div><div class="line">PkgInfo    包的8字节标识符</div><div class="line">Resources/</div><div class="line">Version.plist</div><div class="line">CodeSignature/</div></pre></td></tr></table></figure>
<h3 id="应用程序和App"><a href="#应用程序和App" class="headerlink" title="应用程序和App"></a>应用程序和App</h3><p>OS X对应用程序的处理方式是较为整洁地包装在bundle中，应用程序的bundle包含运行这个应用程序所需要的大部分文件。</p>
<p>在iOS中，app的结构没有这么整洁。iOS会区分苹果提供的默认的应用程序（／Application目录下），越狱情况和通过App store购买的app（／var／mobile／Application目录下）。<br>通过Store购买的app安装在一个表示128位GUID的目录下。</p>
<p>当iOS app在运行时，会被chroot到自己的应用目录，即名字为GUID的目录，应用程序将自己GUID名字的目录当作根目录，因此／tmp指向的是GUID／tmp。</p>
<p>从store购买应用时，应用以.ipa文件的形式打包，这种文件实际上就是一个.zip文件，这个文件在Payload／目录下压缩了应用程序的目录内容。</p>
<h4 id="info-plist"><a href="#info-plist" class="headerlink" title="info.plist"></a>info.plist</h4><p>一个标准的info。plist文件包含以下条目：</p>
<ul>
<li>CFBundleDevelopmentRegion:默认语言</li>
<li>CFBundledisplayName:显示給用户的bundle名称</li>
<li>CFBundleDocumentType：bundle关联的文件类型。是一个字典，value指定了bundle能够处理的文件扩展名。还指定了关联文档显示的图标。</li>
<li>CFBundleExecutable：实际的可执行文件，位于Contents／MacOS目录。</li>
<li>CFBundlePackageType：表示一个4字母的代码，例如APPL = Application，FRMW = Framework， BNDL = Bundle。</li>
<li>CFBundleURLTypes：这个bundle关联的URL。是一个字典，value指定了这个bundle处理的URL scheme以及处理方式。</li>
</ul>
<h4 id="CodeResources"><a href="#CodeResources" class="headerlink" title="CodeResources"></a>CodeResources</h4><p>CodeResources实际上是一个指向_CodeSignature/CodeResources的链接。这个文件是一个属性列表，包含bundle中所有其他文件的列表。这个属性列表只有一项files，是字典。key对应文件名，value是Base64格式的散列值。<br>CodeResources文件可以用与判断一个应用程序是否完好无损，能够防止不小心修改或损坏资源文件。</p>
<h3 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h3><p>framework bundle和app bundle的不同：内建的版本化机制：框架可以包含多个版本的代码，不同版本并排放在不同的子目录中。</p>
<h4 id="查找框架"><a href="#查找框架" class="headerlink" title="查找框架"></a>查找框架</h4><ul>
<li>／System/Libary/Frameworks 包含苹果提供的框架</li>
<li>/network/libary/frameworks </li>
<li>／Library/Frameworks 保存第三方框架（iOS上为空）</li>
<li>~/Library/Frameworks 保存用户提供的框架</li>
<li>/System/Library/Private/Framworks 私有框架</li>
</ul>
<h4 id="顶层框架"><a href="#顶层框架" class="headerlink" title="顶层框架"></a>顶层框架</h4><ul>
<li>Carbon</li>
<li>Cocoa</li>
</ul>
<p>Cocoa框架包含了其他3个框架：AppKit，CoreData和Foudation。封装了其他框架的框架通常称为 保护伞框架（umbrella framework）.</p>
<p>// TODO 本章还有些后续内容，更为底层，以后了解更深时过来交作业～</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/19/TensorFlow-二-TensorFlow-iOS-Examples/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="melody5417">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="melody5417">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/19/TensorFlow-二-TensorFlow-iOS-Examples/" itemprop="url">
                  TensorFlow (二) - TensorFlow iOS Examples
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-19T19:02:48+08:00">
                2017-03-19
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/03/19/TensorFlow-二-TensorFlow-iOS-Examples/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/19/TensorFlow-二-TensorFlow-iOS-Examples/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="TensorFlow-二-TensorFlow-iOS-Examples"><a href="#TensorFlow-二-TensorFlow-iOS-Examples" class="headerlink" title="TensorFlow (二) - TensorFlow iOS Examples"></a>TensorFlow (二) - TensorFlow iOS Examples</h1><h2 id="Build"><a href="#Build" class="headerlink" title="Build"></a>Build</h2><p>编译可参考 TF 的 ios_examples 的 <a href="https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/ios_examples/README.md" target="_blank" rel="external">ReadMe</a> 。</p>
<ul>
<li>升级 Xcode 到 7.3 版本及更高</li>
<li>安装命令行工具。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ xcode-select --install</div></pre></td></tr></table></figure>
<ul>
<li>安装 Homebrew, automake, libtool</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ /usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</div><div class="line">$ brew install automake</div><div class="line">$ brew install libtool</div></pre></td></tr></table></figure>
<ul>
<li>执行 tensorflow/contrib/makefile 路径下的 build_all_ios.sh 脚本，编译大概一个半小时。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ cd tensorflow/contrib/makefile</div><div class="line">$ ./build_all_ios.sh</div></pre></td></tr></table></figure>
<p>执行成功后在 makefile/gen/lib 下生成 libtensorflow-core.a 库。</p>
<h2 id="Run-Examples"><a href="#Run-Examples" class="headerlink" title="Run Examples"></a>Run Examples</h2><p>此时还差一步即可运行 TF 提供的Demo：添加数据模型。</p>
<p>执行下面命令，或者可以手动下载 <a href="https://storage.googleapis.com/download.tensorflow.org/models/inception5h.zip" target="_blank" rel="external">Inception</a>。然后copy到相应路径下。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ mkdir -p ~/graphs</div><div class="line">$ curl -o ~/graphs/inception5h.zip \</div><div class="line">https://storage.googleapis.com/download.tensorflow.org/models/inception5h.zip \</div><div class="line">&amp;&amp; unzip ~/graphs/inception5h.zip -d ~/graphs/inception5h</div><div class="line">$ cp ~/graphs/inception5h/* tensorflow/contrib/ios_examples/benchmark/data/</div><div class="line">$ cp ~/graphs/inception5h/* tensorflow/contrib/ios_examples/camera/data/</div><div class="line">$ cp ~/graphs/inception5h/* tensorflow/contrib/ios_examples/simple/data/</div></pre></td></tr></table></figure>
<p>现在可以运行三个实例工程啦～</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/16/TensorFlow-一/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="melody5417">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="melody5417">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/16/TensorFlow-一/" itemprop="url">
                  TensorFlow (一)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-16T21:57:36+08:00">
                2017-03-16
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/03/16/TensorFlow-一/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/16/TensorFlow-一/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="TensorFlow-一"><a href="#TensorFlow-一" class="headerlink" title="TensorFlow (一)"></a>TensorFlow (一)</h1><p>深度学习已经🔥的不要不要的了，作为码农，现在还不学习TF真的是要out了。</p>
<h2 id="clone-and-install-Github-的-TF-repo"><a href="#clone-and-install-Github-的-TF-repo" class="headerlink" title="clone and install Github 的 TF repo"></a>clone and install Github 的 TF repo</h2><h3 id="clone"><a href="#clone" class="headerlink" title="clone"></a>clone</h3><p><a href="https://github.com/tensorflow/tensorflow" target="_blank" rel="external">TF repo</a> </p>
<h3 id="install"><a href="#install" class="headerlink" title="install"></a>install</h3><p>参考官方的 <a href="https://www.tensorflow.org/install/" target="_blank" rel="external">install guide</a> 即可安装成功。<br>我是通过 virtualenv 安装的，之后每次使用 TF 时都要 activate virtualenv environment。可使用以下两个命令中的任意一个。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ source ~/tensorflow/bin/activate      # bash, sh, ksh, or zsh</div><div class="line">$ source ~/tensorflow/bin/activate.csh  # csh or tcsh</div></pre></td></tr></table></figure>
<p>成功后，终端的 prompt 会变成如下，则可以使用 TF 了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(tensorflow)$</div></pre></td></tr></table></figure>
<p>当结束TF后，需要 deactivate virtualenv environment。运行以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(tensorflow)$ deactivate</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/16/Hexo-Github-搭建个人博客/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="melody5417">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="melody5417">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/16/Hexo-Github-搭建个人博客/" itemprop="url">
                  Hexo + Github 搭建个人博客
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-16T21:04:45+08:00">
                2017-03-16
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/03/16/Hexo-Github-搭建个人博客/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/16/Hexo-Github-搭建个人博客/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Hexo-Github-搭建个人博客"><a href="#Hexo-Github-搭建个人博客" class="headerlink" title="Hexo + Github 搭建个人博客"></a>Hexo + Github 搭建个人博客</h1><p>最近工作遇到了一些挑战，不是来源于技术，但是根源还是自己的能力不能被他人认可。遂下定决心开始有规划，有持续性地总结和记录。第一步就从搭建这个博客开始～</p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>搭建博客主要分为以下步骤，其中 accessory 是可选的。</p>
<ul>
<li>Github</li>
<li>Hexo</li>
<li>配置Hexo</li>
<li>发布博客</li>
<li>Accessory(optional)</li>
</ul>
<h3 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h3><ol>
<li>注册Github账号</li>
<li>建立Public Repo，名称为 your-github-name.github.io（your-github-name 为你github的名称）。</li>
<li>配置SSH-Key，本步骤可选。</li>
</ol>
<h3 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h3><ol>
<li><p>安装 Node.js<br>直接到<a href="https://nodejs.org/en/" target="_blank" rel="external">Node.js 官网</a>下载最新版本即可。 或者通过 Homebrew 安装。<br>若想卸载旧版本的Node.js，可运行以下命令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ brew uninstall nodejs #通过brew安装</div><div class="line">$ sudo rm -rf /usr/local/&#123;bin/&#123;node,npm&#125;,lib/node_modules/npm,lib/node,share/man/*/node.*&#125; #官网下载pkg安装包</div></pre></td></tr></table></figure>
</li>
<li><p>安装 Hexo</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install -g hexo-cli</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="配置Hexo"><a href="#配置Hexo" class="headerlink" title="配置Hexo"></a>配置Hexo</h3><p>本地初始化博客文件夹，例：~/Blog</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ cd ~/Blog</div><div class="line">$ hexo init</div><div class="line">$ npm install</div></pre></td></tr></table></figure>
<p>修改站点配置文件 ~/Blog/_config.yml， 关联Github信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">title: 博客名</div><div class="line">subtitle: 博客副标题</div><div class="line">description: </div><div class="line">author: 作者</div><div class="line">language: zh-Hans</div><div class="line">timezone: Asia/Shanghai</div><div class="line"></div><div class="line">deploy:</div><div class="line">type: git</div><div class="line">repo: https://github.com/your-github-name/your-github-name.github.io.git</div><div class="line">branch: master</div></pre></td></tr></table></figure>
<p>注意：每一项的“:”后面都要保留一个空格，deploy部分的参数前面保留两个空格。</p>
<h3 id="发布博客"><a href="#发布博客" class="headerlink" title="发布博客"></a>发布博客</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server #本地发布</div></pre></td></tr></table></figure>
<p><a href="http://localhost:4000/" target="_blank" rel="external">http://localhost:4000/</a> 可看到搭建好的博客，确认前面操作是否成功</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ npm install hexo-deployer-git --save</div><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>此时可以在Github上对应的Repo看见本地 ~/Blog/public 文件的内容，打开博客主页 your_github_name.github.io 即可看到搭建的博客的主页啦。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ hexo new &quot;first page test&quot;</div><div class="line">$ hexo generate</div><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>以上命令即可创建一篇博文并提交到Git上，~/Blog/Source下存储每篇博文的 .md 文件。删除该 .md 文件即可删除对应博文。再次运行以下命令即可生成静态网页并发布。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>若刷新博客时发现问题，则可运行以下命令清理已生成的静态网页。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo clean</div></pre></td></tr></table></figure>
<h3 id="Accessory"><a href="#Accessory" class="headerlink" title="Accessory"></a>Accessory</h3><p>Hexo可以选择多种主题，集成评论，数据统计和搜索等第三方功能。推荐一个经典主题：<a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="external">Next</a>。其配套的相关文档详细介绍了集成第三方服务的步骤。</p>
<h2 id="Hack-On"><a href="#Hack-On" class="headerlink" title="Hack On"></a>Hack On</h2><p>用这样一句经典的话结束第一篇博文，望自己 Hack On～</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  

          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="melody5417" />
          <p class="site-author-name" itemprop="name">melody5417</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">melody5417</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"melody5417"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  













  
  

  

  

  

  


  

</body>
</html>
